<!DOCTYPE html>

<html>
    <head>
        <title>Ma Session</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="predictif.css"/>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    </head>

    <body>

        <div class="topnav">
            <a href="index.html">Acceuil</a>
            <a class="active" href="SessionClient.html">Session</a>
            <a href="HistoriqueClient.html">Historique</a>
            <a href="RechercheMedium.html">Recherche Mediums</a>
            <a href="DeconnexionClient.html">Déconnexion</a>
        </div>

        <h1>Bienvenue sur votre Session</h1>

        <h3>Vos informations personelles</h3>
        <br>
        <div class="center">
            <ul class="center">
                <li>Prénom : <span id="prenom"></span></li>
                <li>Nom : <span id="nom"></span></li>
                <li>Genre : <span id="genre"></span></li>
                <li>Né(e) le : <span id="date-naissance"></span></li>
                <li>Email : <span id="mail"></span></li>
                <li>Téléphone : <span id="telephone"></span></li>
                <li>Adresse : <span id="adresse"></span></li>
            </ul>
        </div>

        <h3>Votre Profil Astral</h3>
        <br>
        <div class="folio">
            <table class="folio">
                <tr>
                    <td><img src="./image/zodiaque.jpeg"/></td>
                    <td><img src="./image/chinois.jpg"/></td>
                    <td><img src="./image/animal.jpg"/></td>
                    <td><img src="./image/couleur.png"/></td>
                </tr>
                <tr>
                    <td><h4>Votre Signe du Zodiaque</h4></td>
                    <td><h4>Votre Signe Chinois</h4></td>
                    <td><h4>Votre Animal Totem</h4></td>
                    <td><h4>Votre Couleur Astrologique</h4></td>
                </tr>
                <tr>
                    <td class="prof"><strong><span id="zodiaque"></strong></span></td>
                    <td class="prof"><strong><span id="chinois"></strong></span></td>
                    <td class="prof"><strong><span id="animal"></strong></span></td>
                    <td class="prof"><strong><span id="couleur"></strong></span></td>
                </tr>
            </table>
        </div>


        <script>
            $(document).ready(function () {
                // Fonction appelée lors du clic sur le bouton

                $('#notification').html("Connexion..."); // Message pour le paragraphe de notification



                // Appel AJAX
                $.ajax({
                    url: './ActionServlet',
                    method: 'POST',
                    data: {
                        todo: 'session-client'
                    },
                    dataType: 'json'
                })
                        .done(function (response) { // Fonction appelée en cas d'appel AJAX réussi
                            console.log('Response', response); // LOG dans Console Javascript
                            if (true) {
                                //$('#notification').html("Bienvenu à "+response.client.prenom+" "+response.client.nom+" !");
                                $('#prenom').html(response.prenom);
                                $('#nom').html(response.nom);
                                $('#genre').html(response.genre);
                                $('#date-naissance').html(response.date);
                                $('#mail').html(response.mail);
                                $('#telephone').html(response.telephone);
                                $('#adresse').html(response.adresse);
                                $('#zodiaque').html(response.zodiaque);
                                $('#chinois').html(response.chinois);
                                $('#animal').html(response.animal);
                                $('#couleur').html(response.couleur);
                                // Message pour le paragraphe de notification
                                // TODO: afficher les informations du client dans la notification
                                // Exemple: Connexion de Ada Lovelace (ID 1)
                            } else {
                                $('#notification').html("Erreur de Connexion"); // Message pour le paragraphe de notification
                            }
                        })
                        .fail(function (error) { // Fonction appelée en cas d'erreur lors de l'appel AJAX
                            console.log('Error', error); // LOG dans Console Javascript
                            alert("Erreur lors de l'appel AJAX");
                        })
                        .always(function () { // Fonction toujours appelée

                        });
            });

        </script>


    </body>

</html>
